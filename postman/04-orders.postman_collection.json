{
  "info": {
    "name": "Clothing E-Commerce - Phase 4 Orders",
    "_postman_id": "phase4-orders-collection",
    "description": "Order Management API - Create orders (checkout), view orders, track order status. All endpoints require authentication. Orders are immutable and preserve historical product data.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:5000",
      "type": "string"
    },
    {
      "key": "token",
      "value": "",
      "type": "string",
      "description": "JWT token from login/register endpoint"
    },
    {
      "key": "orderId",
      "value": "",
      "type": "string",
      "description": "Order ID (from createOrder response)"
    }
  ],
  "item": [
    {
      "name": "Create Order (Checkout)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{token}}",
            "description": "JWT authentication token"
          },
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/api/orders",
          "host": ["{{baseUrl}}"],
          "path": ["api", "orders"]
        },
        "description": "Create order from cart items. Automatically clears cart after successful order creation. All operations are atomic (transaction-based). Optional: Include shippingAddress and paymentMethod in request body."
      },
      "response": []
    },
    {
      "name": "Create Order with Shipping Address",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          },
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"shippingAddress\": {\n    \"street\": \"123 Main Street\",\n    \"city\": \"New York\",\n    \"state\": \"NY\",\n    \"zipCode\": \"10001\",\n    \"country\": \"USA\"\n  },\n  \"paymentMethod\": \"CREDIT_CARD\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/api/orders",
          "host": ["{{baseUrl}}"],
          "path": ["api", "orders"]
        },
        "description": "Create order with shipping address and payment method. Valid payment methods: CASH_ON_DELIVERY, CREDIT_CARD, DEBIT_CARD, PAYPAL"
      },
      "response": []
    },
    {
      "name": "Get My Orders",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{token}}",
            "description": "JWT authentication token"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/orders/my",
          "host": ["{{baseUrl}}"],
          "path": ["api", "orders", "my"]
        },
        "description": "Get all orders for the authenticated user. Returns orders sorted by creation date (newest first)."
      },
      "response": []
    },
    {
      "name": "Get My Orders with Pagination",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/orders/my?page=1&limit=10",
          "host": ["{{baseUrl}}"],
          "path": ["api", "orders", "my"],
          "query": [
            {
              "key": "page",
              "value": "1",
              "description": "Page number (starts from 1)"
            },
            {
              "key": "limit",
              "value": "10",
              "description": "Items per page (max 50)"
            }
          ]
        },
        "description": "Get user's orders with pagination. Default: page=1, limit=10"
      },
      "response": []
    },
    {
      "name": "Get My Orders by Status",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/orders/my?status=PENDING",
          "host": ["{{baseUrl}}"],
          "path": ["api", "orders", "my"],
          "query": [
            {
              "key": "status",
              "value": "PENDING",
              "description": "Filter by status: PENDING, PAID, PROCESSING, SHIPPED, DELIVERED, CANCELLED"
            }
          ]
        },
        "description": "Get user's orders filtered by status. Valid statuses: PENDING, PAID, PROCESSING, SHIPPED, DELIVERED, CANCELLED"
      },
      "response": []
    },
    {
      "name": "Get My Orders - Pending Only",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/orders/my?status=PENDING&page=1&limit=10",
          "host": ["{{baseUrl}}"],
          "path": ["api", "orders", "my"],
          "query": [
            {
              "key": "status",
              "value": "PENDING"
            },
            {
              "key": "page",
              "value": "1"
            },
            {
              "key": "limit",
              "value": "10"
            }
          ]
        },
        "description": "Get pending orders with pagination"
      },
      "response": []
    },
    {
      "name": "Get Order by ID",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{token}}",
            "description": "JWT authentication token"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/orders/{{orderId}}",
          "host": ["{{baseUrl}}"],
          "path": ["api", "orders", "{{orderId}}"]
        },
        "description": "Get a specific order by ID. Only returns order if it belongs to the authenticated user. Order contains immutable snapshot of product data at time of purchase."
      },
      "response": []
    },
    {
      "name": "Update Order Status",
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{token}}",
            "description": "JWT authentication token"
          },
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"status\": \"SHIPPED\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/api/orders/{{orderId}}/status",
          "host": ["{{baseUrl}}"],
          "path": ["api", "orders", "{{orderId}}", "status"]
        },
        "description": "Update order status. Valid statuses: PENDING, PAID, PROCESSING, SHIPPED, DELIVERED, CANCELLED. Note: Cannot update status of cancelled orders. (For admin/future implementation)"
      },
      "response": []
    },
    {
      "name": "Error Cases",
      "item": [
        {
          "name": "Create Order - Empty Cart",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders"]
            },
            "description": "Test error handling when trying to create order with empty cart"
          },
          "response": []
        },
        {
          "name": "Create Order - Out of Stock Item",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders"]
            },
            "description": "Test error handling when cart contains items that are out of stock. Add out-of-stock items to cart first, then try to checkout."
          },
          "response": []
        },
        {
          "name": "Get Order - Invalid ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/orders/invalidid123",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "invalidid123"]
            },
            "description": "Test error handling for invalid order ID format"
          },
          "response": []
        },
        {
          "name": "Get Order - Not Found",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/orders/507f1f77bcf86cd799439011",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "507f1f77bcf86cd799439011"]
            },
            "description": "Test error handling for non-existent order ID"
          },
          "response": []
        },
        {
          "name": "Get Order - Unauthorized (Other User's Order)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "{{orderId}}"]
            },
            "description": "Test error handling when trying to access another user's order. Use an order ID from a different user."
          },
          "response": []
        },
        {
          "name": "Update Status - Invalid Status",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"INVALID_STATUS\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "{{orderId}}", "status"]
            },
            "description": "Test error handling for invalid order status"
          },
          "response": []
        },
        {
          "name": "Update Status - Cancelled Order",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"SHIPPED\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "{{orderId}}", "status"]
            },
            "description": "Test error handling when trying to update status of a cancelled order"
          },
          "response": []
        },
        {
          "name": "Unauthorized - No Token",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/orders/my",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "my"]
            },
            "description": "Test error handling when accessing orders without authentication token"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Order Status Examples",
      "item": [
        {
          "name": "Update Status - PENDING to PAID",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"PAID\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "{{orderId}}", "status"]
            },
            "description": "Update order status from PENDING to PAID (payment confirmed)"
          },
          "response": []
        },
        {
          "name": "Update Status - PAID to PROCESSING",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"PROCESSING\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "{{orderId}}", "status"]
            },
            "description": "Update order status from PAID to PROCESSING (order being prepared)"
          },
          "response": []
        },
        {
          "name": "Update Status - PROCESSING to SHIPPED",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"SHIPPED\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "{{orderId}}", "status"]
            },
            "description": "Update order status from PROCESSING to SHIPPED (order dispatched)"
          },
          "response": []
        },
        {
          "name": "Update Status - SHIPPED to DELIVERED",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"DELIVERED\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "{{orderId}}", "status"]
            },
            "description": "Update order status from SHIPPED to DELIVERED (order received by customer)"
          },
          "response": []
        },
        {
          "name": "Cancel Order",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"CANCELLED\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "{{orderId}}", "status"]
            },
            "description": "Cancel an order. Note: Once cancelled, order status cannot be changed."
          },
          "response": []
        }
      ]
    }
  ]
}

